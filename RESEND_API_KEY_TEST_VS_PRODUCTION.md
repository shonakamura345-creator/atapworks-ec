# Resend APIキー：テスト用と本番用の使い分け

## 結論

**技術的には同じAPIキーを使っても問題ありませんが、セキュリティと管理の観点から、本番用のAPIキーを新しく作成することを推奨します。**

---

## 選択肢

### オプション1: 同じAPIキーを使う（簡単）

**メリット**:
- ✅ 設定が簡単（既存のAPIキーをそのまま使用）
- ✅ 追加の作業が不要
- ✅ すぐに使える

**デメリット**:
- ❌ テスト環境と本番環境で同じキーを使用することになる
- ❌ セキュリティのベストプラクティスに反する
- ❌ テスト環境で問題が発生した場合、本番環境にも影響する可能性がある
- ❌ キーの管理が複雑になる

**推奨度**: ⭐⭐（技術的には問題ないが、推奨しない）

---

### オプション2: 本番用のAPIキーを新しく作成する（推奨）

**メリット**:
- ✅ セキュリティのベストプラクティスに従える
- ✅ テスト環境と本番環境を分離できる
- ✅ テスト環境で問題が発生しても、本番環境に影響しない
- ✅ キーの管理が明確になる
- ✅ 本番環境専用のキーを無効化できる（必要に応じて）

**デメリット**:
- ❌ 追加の作業が必要（5分程度）
- ❌ 新しいAPIキーを管理する必要がある

**推奨度**: ⭐⭐⭐⭐⭐（強く推奨）

---

## 推奨事項

**本番環境で運用する予定なら、本番用のAPIキーを新しく作成することを強く推奨します。**

理由：
1. **セキュリティ**: テスト環境と本番環境を分離することで、セキュリティリスクを軽減
2. **管理**: 環境ごとにキーを分けることで、管理が明確になる
3. **トラブルシューティング**: 問題が発生した場合、どの環境の問題か特定しやすい
4. **ベストプラクティス**: 業界標準のセキュリティプラクティスに従える

---

## 本番用APIキーの作成手順

### ステップ1: Resend Dashboardにログイン

1. [Resend Dashboard](https://resend.com/api-keys) にログイン

### ステップ2: 新しいAPIキーを作成

1. 左側のメニューから「**API Keys**」をクリック
2. 「**Create API Key**」ボタンをクリック
3. 以下の情報を入力：
   - **Name**: `atapworks-production`（本番環境用であることが分かる名前）
   - **Permission**: 「**Full Access**」を選択（または必要に応じて「Sending Access」）
4. 「**Add**」ボタンをクリック
5. APIキーが表示されます（`re_...` で始まる文字列）

⚠️ **重要**: APIキーは一度しか表示されません。必ずコピーして安全な場所に保存してください。

### ステップ3: Vercelの環境変数に設定

1. [Vercel Dashboard](https://vercel.com/dashboard) → プロジェクト → Settings → Environment Variables
2. `RESEND_API_KEY` を選択（既に設定されている場合）または「Add New」をクリック
3. 以下の情報を入力：
   - **Key**: `RESEND_API_KEY`
   - **Value**: 新しく作成した本番用APIキー（`re_...` で始まる文字列）
   - **Environment**: 「Production」にチェック
4. 「Save」をクリック

### ステップ4: 再デプロイ

1. Vercel Dashboard → 「Deployments」タブ
2. 最新のデプロイメントの「...」→「Redeploy」
3. 再デプロイが完了するのを待つ

---

## 既存のAPIキーを使う場合の手順

もし既存のAPIキーを使う場合は：

1. Vercel Dashboard → Settings → Environment Variables
2. `RESEND_API_KEY` を確認
3. 既に設定されている場合は、そのまま使用可能
4. 設定されていない場合は、既存のAPIキーを設定

⚠️ **注意**: 既存のAPIキーがテスト環境で使用されている場合、本番環境でも同じキーを使用することになります。

---

## APIキーの管理

### 複数のAPIキーを管理する場合

Resend Dashboard → API Keys で、複数のAPIキーを管理できます：

- `atapworks-test` - テスト環境用
- `atapworks-production` - 本番環境用

各キーに分かりやすい名前を付けることで、管理が容易になります。

### APIキーを無効化する場合

1. Resend Dashboard → API Keys
2. 無効化したいAPIキーを選択
3. 「Delete」または「Revoke」をクリック

本番用のキーを無効化することで、本番環境への影響を最小限に抑えられます。

---

## まとめ

### 推奨される方法

1. ✅ **本番用のAPIキーを新しく作成**
2. ✅ **Vercelの環境変数に本番用APIキーを設定**
3. ✅ **テスト環境と本番環境でキーを分離**

### 技術的には可能な方法

1. ⚠️ **既存のAPIキーをそのまま使用**
2. ⚠️ **テスト環境と本番環境で同じキーを使用**

---

## 結論

**本番環境で運用する予定なら、本番用のAPIキーを新しく作成することを強く推奨します。**

理由：
- セキュリティのベストプラクティスに従える
- テスト環境と本番環境を分離できる
- 管理が明確になる
- 追加の作業は5分程度で完了

既存のAPIキーを使うことも技術的には可能ですが、セキュリティと管理の観点から、新しいAPIキーを作成することをお勧めします。

